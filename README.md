# 🏠 孤独優勝クエスト - Stay Home is a Win

> 外が騒がしいほど、在宅は強い。  
> 今日もあなたは、ここで**完全勝利**。

---

## 📖 プロジェクト概要

**孤独優勝クエスト**は、リアルタイム人流データを"外出圧力"に変換し、  
**孤独・引きこもりを肯定する**体験型Webアプリケーションです。

### コンセプト

* 外が混むほど → **在宅が勝利条件**
* "出ない選択"を → **ゲームクリア**として再定義
* ネタと愛が同居する → **自己肯定メッセージ**

---

## ✨ 主な機能

### 1. **外出圧力指数（OPI）**
リアルタイム人流データを0-100に正規化し、UI表示。

| OPI範囲 | 難易度 | メッセージ例 |
|---------|--------|-------------|
| 80-100  | 修羅場 | 「外界、恋のエンカウント多発。今日は部屋がチート。」 |
| 50-79   | 警戒   | 「"そこそこ混雑"が一番メンタルに効く。布団を固めよ。」 |
| 30-49   | 微風   | 「街のBGMが小さい。窓開けて勝ち。」 |
| 0-29    | 静寂   | 「世界がスリープ。在宅は完全勝利。」 |

### 2. **選択肢システム**
* **在宅行動**：湯を沸かす / 好きな音を流す / 5分だけ伸び など
* **微外出**（OPI≤49時のみ）：夜空を1分見る / 玄関先で深呼吸 など

**すべての選択が必ず勝利に繋がる設計**

### 3. **称号システム**
行動とOPIに応じた称号を付与。

* 例：「賢者の部屋着」「窓際の賢王」「在宅SSランク」

### 4. **共有機能（任意）**
* X（Twitter）共有ボタン
* テキストコピー機能
* ハッシュタグ：`#孤独優勝クエスト` `#在宅が正解`

---

## 🛠️ 技術スタック

* **言語**: PHP 7.4+ / JavaScript (ES6+)
* **スタイル**: CSS3 (カスタムプロパティ / レスポンシブ)
* **データ**: リアルタイム人流API（JSON）
* **デザイン**: レトロRPG風 / OPI連動配色

---

## 📂 ファイル構成

```
PHPdenanika/
├── index.php           # メインページ（OPI取得・シーン表示）
├── result.php          # 結果ページ（称号・共有）
├── style.css           # スタイルシート
├── script.js           # クライアントサイドJS
├── data/
│   ├── dialogue.php    # セリフ辞書（ネタ文言）
│   └── meta.php        # メタデータ・定数
├── lib/
│   └── api.php         # API通信・OPI取得
└── README.md           # このファイル
```

---

## 🚀 セットアップ

### 1. 環境要件
* PHP 7.4 以上
* Webサーバー（Apache / Nginx / ローカル開発サーバー）
* インターネット接続（API通信用）

### 2. インストール

```bash
# リポジトリをクローン
git clone [your-repo-url]
cd PHPdenanika

# ローカルサーバー起動（PHP内蔵サーバー）
php -S localhost:8000
```

ブラウザで `http://localhost:8000` にアクセス。

### 3. API設定

`lib/api.php` の `getApiUrl()` 関数に、  
使用する人流データAPIのエンドポイントを設定：

```php
function getApiUrl() {
    return 'https://your-api-endpoint.com/people-flow?area=tokyo';
}
```

#### 想定するJSON形式

```json
{
    "timestamp": "2025-11-02T12:00:00Z",
    "area": "shibuya",
    "people_percent": 78.5
}
```

※ `people_percent` が0-100の人流割合

---

## 🎨 カスタマイズ

### 配色変更

`style.css` の CSS変数を編集：

```css
:root {
    --color-primary: #f57c00;
    --color-secondary: #ffad42;
    --color-bg: #1a0f00;
}
```

### セリフ追加

`data/dialogue.php` の各配列に文言を追加：

```php
$messages = [
    'hell' => [
        "あなたの新しいメッセージ",
        // ...
    ]
];
```

### 称号追加

`data/dialogue.php` の `getTitle()` 関数内で定義：

```php
$titles = [
    'hell' => [
        '新しい称号名',
        // ...
    ]
];
```

---

## 🔒 セキュリティ

* ✅ 個人データは一切扱わない
* ✅ 集計済み公開データのみ使用
* ✅ XSS対策（`htmlspecialchars()`）
* ✅ CSRF対策（POSTのみ受付）
* ⚠️ 本番環境ではHTTPS必須

---

## 🎯 使い方

### ユーザー視点

1. **アクセス** → OPIと現在の状況メッセージを表示
2. **選択** → 在宅行動 or 微外出を選ぶ
3. **結果** → 称号・経験値を獲得（必ず勝利）
4. **共有** → X投稿 or スクショ保存（任意）

### 開発者視点

1. API接続設定
2. セリフ・称号のカスタマイズ
3. デザイン調整
4. 拡張機能実装（コンボ検出など）

---

## 🌟 拡張アイデア

* [ ] **在宅コンボ検出**：特定の行動順で称号進化
* [ ] **日替わり試練**：ランダムミッション
* [ ] **多言語対応**：英語版 "Solitude Wins Today."
* [ ] **ハードウェア連携**：OPI→照明色変更
* [ ] **履歴機能**：過去の称号を確認
* [ ] **達成率表示**：全称号コンプリート

---

## 📜 ライセンス

MIT License（または任意のライセンス）

---

## 💬 メッセージ

> **「出ない勇気は、出る勇気よりもレア。」**
> 
> このプロジェクトは、孤独・引きこもりを否定せず、  
> むしろ**ひとつの正解**として肯定します。
> 
> 外の喧騒に惑わされず、  
> 自分のペースで、自分の選択を。
> 
> **今日も、あなたは完全勝利。**

---

## 🔗 リンク

* [プロジェクトサイト](#)（公開時に追加）
* [ハッシュタグ: #孤独優勝クエスト](https://twitter.com/search?q=%23孤独優勝クエスト)

---

**Stay Home is a Win. 🏠✨**
